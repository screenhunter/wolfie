{"version":3,"sources":["/home/havvy/tennu/tennu/src/plugin/startup.sjs"],"names":["module","exports","init","client","imports","lifetime","nick","config","authPassword","nickserv","autojoinChannels","_socket","on","mode","log","say","Array","isArray","forEach","channel","join","line","info","note","disconnect","requires"],"mappings":"AAAAA,MAAA,CAAOC,OAAP,GAAiB;AAAA,IACbC,IAAA,EAm0CU,UAn0CMC,MAm0CN,EAn0CcC,OAm0Cd,EAn0CuB;AAAA,QAC7B,MAAMC,QAAA,GAAWD,OAAA,CAAQC,QAAzB,CAD6B;AAAA,QAG7B,MAAMC,IAAA,GAAOH,MAAA,CAAOI,MAAP,CAAc,MAAd,CAAb,CAH6B;AAAA,QAI7B,MAAMC,YAAA,GAAeL,MAAA,CAAOI,MAAP,CAAc,eAAd,CAArB,CAJ6B;AAAA,QAK7B,MAAME,QAAA,GAAWN,MAAA,CAAOI,MAAP,CAAc,UAAd,CAAjB,CAL6B;AAAA,QAM7B,MAAMG,gBAAA,GAAmBP,MAAA,CAAOI,MAAP,CAAc,UAAd,CAAzB,CAN6B;AAAA,QAQ7BJ,MAAA,CAAOQ,OAAP,CAAeC,EAAf,CAAkB,OAAlB,EA2zCM,YA3zCiC;AAAA,YAEnC;AAAA,YAAAT,MAAA,CAAOU,IAAP,CAAYP,IAAZ,EAAkB,GAAlB,EAFmC;AAAA,YAInC,IAAIE,YAAJ,EAAkB;AAAA,gBACdL,MAAA,CAAOW,GAAP,CAAW,QAAX,EAAqB,OAArB,EAA8B,0BAA9B,EADc;AAAA,gBAEdX,MAAA,CAAOY,GAAP,CAAWN,QAAX,EAAqB,cAAcD,YAAnC,EAFc;AAAA,aAJiB;AAAA,YASnC,IAAIQ,KAAA,CAAMC,OAAN,CAAcP,gBAAd,CAAJ,EAAqC;AAAA,gBACjCP,MAAA,CAAOW,GAAP,CAAW,QAAX,EAAqB,OAArB,EAA8B,2BAA9B,EADiC;AAAA,gBAEjCJ,gBAAA,CAAiBQ,OAAjB,CAgzCF,UAhzCqCC,OAgzCrC,EAhzC8C;AAAA,oBACxChB,MAAA,CAAOiB,IAAP,CAAYD,OAAZ,EADwC;AAAA,iBAA5C,EAFiC;AAAA,aATF;AAAA,SAAvC,EAR6B;AAAA,QAyB7BhB,MAAA,CAAOQ,OAAP,CAAeC,EAAf,CAAkB,MAAlB,EA0yCM,UA1yC8BS,IA0yC9B,EA1yCoC;AAAA,YACtClB,MAAA,CAAOmB,IAAP,CAAY,IAAZ,EAAkBD,IAAlB,EADsC;AAAA,SAA1C,EAzB6B;AAAA,QA8B7B;AAAA,QAAAlB,MAAA,CAAOS,EAAP,CAAU,OAAV,EAqyCM,YAryCyB;AAAA,YAC3BT,MAAA,CAAOoB,IAAP,CAAY,OAAZ,EAAqB,yBAArB,EAD2B;AAAA,YAE3BpB,MAAA,CAAOqB,UAAP,GAF2B;AAAA,SAA/B,EA9B6B;AAAA,QAmC7B,OAAO,EACHC,QAAA,EAAU,CAAC,UAAD,CADP,EAAP,CAnC6B;AAAA,KADpB;AAAA,CAAjB","file":"startup.js","sourcesContent":["module.exports = {\n    init: function (client, imports) {\n        const lifetime = imports.lifetime;\n\n        const nick = client.config('nick');\n        const authPassword = client.config('auth-password');\n        const nickserv = client.config('nickserv');\n        const autojoinChannels = client.config('channels');\n\n        client._socket.on('ready', function () {\n            // RAWR! I'm a <s>monster</s> Bot!\n            client.mode(nick, 'B');\n\n            if (authPassword) {\n                client.log('notice', 'Tennu', 'Identifying to services.');\n                client.say(nickserv, 'identify ' + authPassword);\n            }\n\n            if (Array.isArray(autojoinChannels)) {\n                client.log('notice', 'Tennu', 'Joining default channels.');\n                autojoinChannels.forEach(function (channel) {\n                    client.join(channel);\n                });\n            }\n        });\n\n        client._socket.on('data', function (line) {\n            client.info('<-', line);\n        });\n\n        // Standard event for IRC quitting.\n        client.on('error', function () {\n            client.note('Tennu', 'Closing IRC Connection.');\n            client.disconnect();\n        });\n\n        return {\n            requires: [\"lifetime\"]\n        };\n    }\n}"],"sourceRoot":"/source/"}